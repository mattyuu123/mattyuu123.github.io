<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ä½“æ„Ÿã™ã‚‹æ•°å­¦ - ãƒ“ãƒ¥ãƒ•ã‚©ãƒ³ã®é‡</title>
    <style>
      body {
        margin: 0;
        font-family: sans-serif;
        background: linear-gradient(to bottom right, #cce4f6, #ffffff, #c3f7cc);
        color: #333;
      }
      /* å…±é€šãƒ˜ãƒƒãƒ€ / ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ */
      .site-header {
        background-color: white;
        padding: 1em 1.25em;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
      }
      .site-header h1 {
        color: #1e3a8a;
        margin: 0;
        font-size: 1.15rem;
      }
      .home-btn {
        text-decoration: none;
        display: inline-block;
        padding: 0.45em 0.8em;
        border-radius: 8px;
        border: 1px solid #e5e7eb;
        background: #fff;
        color: #1e3a8a;
        font-weight: 600;
      }
      section {
        max-width: 900px;
        margin: 2em auto;
        padding: 1em;
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }
      footer {
        margin-top: 4em;
        padding: 2em;
        text-align: center;
        font-size: 0.9em;
        color: #666;
      }
      canvas {
        border: 1px solid #aaa;
        background-color: #f9f9f9;
        display: block;
        margin: 1em auto;
      }
    </style>
  </head>
  <body>
    <header class="site-header">
      <h1>ä½“æ„Ÿã™ã‚‹æ•°å­¦</h1>
      <nav>
        <a class="home-btn" href="index.html">ãƒ›ãƒ¼ãƒ </a>
      </nav>
    </header>

    <section id="app-content">
      <h2>ğŸªµ ãƒ“ãƒ¥ãƒ•ã‚©ãƒ³ã®é‡</h2>
      <p>
        ç·šã®é–“éš”ã¨åŒã˜é•·ã•ã®é‡ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«æŠ•ã’ã¦ã€ä½•æœ¬äº¤å·®ã™ã‚‹ã‹ã‚’ä½¿ã£ã¦Ï€ã‚’è¿‘ä¼¼ã™ã‚‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
      </p>
      <label
        >æŠ•ã’ã‚‹é‡ã®æœ¬æ•°ï¼š<input
          type="number"
          id="needleCount"
          value="1000"
          min="1"
      /></label>
      <button onclick="dropNeedles()">é‡ã‚’æŠ•ã’ã‚‹</button>

      <canvas id="canvas" width="800" height="400"></canvas>
      <p id="result"></p>
    </section>

    <footer>Â© 2025 æ¾ä¸­</footer>

    <script>
      function dropNeedles() {
        const count = parseInt(document.getElementById("needleCount").value);
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        const width = canvas.width;
        const height = canvas.height;

        const lineSpacing = 40; // ç·šã®é–“éš” t
        const needleLength = lineSpacing; // é‡ã®é•·ã• Lï¼ˆä»Šå›ã¯ L = tï¼‰

        // ç”»é¢ã‚¯ãƒªã‚¢
        ctx.clearRect(0, 0, width, height);

        // ç¸¦ç·šã‚’æã
        ctx.strokeStyle = "#ccc";
        const numLines = Math.floor(width / lineSpacing);
        for (let i = 0; i <= numLines; i++) {
          const x = i * lineSpacing;
          ctx.beginPath();
          ctx.moveTo(x, 0);
          ctx.lineTo(x, height);
          ctx.stroke();
        }

        let crossCount = 0;

        // é‡ã‚’æãï¼ˆå›è»¢ã•ã›ã‚‹ï¼ï¼‰
        ctx.lineWidth = 1;
        ctx.strokeStyle = "rgba(0, 0, 200, 0.5)";
        for (let i = 0; i < count; i++) {
          const xCenter = Math.random() * width;
          const yCenter = Math.random() * height;
          const angle = Math.random() * Math.PI; // 0ã€œÏ€ ã®ä¸€æ§˜ä¹±æ•°

          const dx = (needleLength / 2) * Math.cos(angle);
          const dy = (needleLength / 2) * Math.sin(angle);

          const x1 = xCenter - dx;
          const y1 = yCenter - dy;
          const x2 = xCenter + dx;
          const y2 = yCenter + dy;

          // é‡ã‚’æç”»ï¼ˆå›è»¢ã‚ã‚Šï¼‰
          ctx.beginPath();
          ctx.moveTo(x1, y1);
          ctx.lineTo(x2, y2);
          ctx.stroke();

          // ç¸¦ç·šã¨äº¤å·®ã—ãŸã‹ï¼Ÿï¼ˆç«¯ç‚¹ã®å±ã™ã‚‹ã‚¹ãƒˆãƒªãƒƒãƒ—ãŒç•°ãªã‚Œã°äº¤å·®ï¼‰
          const lineIndex1 = Math.floor(x1 / lineSpacing);
          const lineIndex2 = Math.floor(x2 / lineSpacing);
          if (lineIndex1 !== lineIndex2) crossCount++;
        }

        // Ï€ ã®æ¨å®šï¼ˆäº¤å·®ãŒ 0 ã®ã¨ãã¯è¨ˆç®—ã—ãªã„ï¼‰
        let resultHtml = `äº¤å·®æœ¬æ•°ï¼š<strong>${crossCount}</strong><br>`;
        if (crossCount > 0) {
          const approxPi =
            (2 * needleLength * count) / (lineSpacing * crossCount);
          resultHtml += `Ï€ã®è¿‘ä¼¼å€¤ï¼š<strong>${approxPi.toFixed(6)}</strong>`;
        } else {
          resultHtml += `Ï€ã®è¿‘ä¼¼å€¤ï¼š<strong>è¨ˆç®—ä¸èƒ½ï¼ˆäº¤å·®ãªã—ï¼‰</strong>`;
        }
        document.getElementById("result").innerHTML = resultHtml;
      }
    </script>
  </body>
</html>
